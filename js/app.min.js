!function() {
    function e() {
        $("#innerWrapper-left .columns .items.active").each(function(e) {
            console.log("we got an active item. index: ", e, $(this)), $(this).removeClass("pos_0 pos_1 pos_2 pos_3"), 
            $(this).addClass("pos_" + e);
        });
    }
    !function() {
        $("#innerWrapper-left .columns").append('<div class="items"><p>Item A</p></div>'), 
        $("#innerWrapper-left .columns").append('<div class="items"><p>Item B</p></div>'), 
        $("#innerWrapper-left .columns").append('<div class="items"><p>Item C</p></div>'), 
        $("#innerWrapper-left .columns").append('<div class="items"><p>Item D</p></div>'), 
        $("#innerWrapper-right .columns").append('<div class="items"><p>Item A</p></div>'), 
        $("#innerWrapper-right .columns").append('<div class="items"><p>Item B</p></div>'), 
        $("#innerWrapper-right .columns").append('<div class="items"><p>Item C</p></div>'), 
        $("#innerWrapper-right .columns").append('<div class="items"><p>Item D</p></div>'), 
        $("#innerWrapper-left .columns .items:nth-child(1)").addClass("active pos_0"), $("#innerWrapper-left .columns .items:nth-child(2)").addClass("active pos_1"), 
        $("#innerWrapper-left .columns .items:nth-child(3)").addClass("active pos_2"), $("#innerWrapper-right .columns .items:nth-child(1)").addClass("active pos_0");
    }(), $(".items").on("click", function(e) {
        $(this).toggleClass("selected");
    }), $(document).keypress(function(e) {
        13 == e.which && $(".buttons.button-left").trigger("click");
    }), $(".buttons.button-left").on("click", function(n) {
        var s = $("#innerWrapper-left .columns .items.selected").length;
        $("#innerWrapper-left .columns .items.selected").each(function(e) {
            console.log($(this), "delay: ", s - e), $(this).css({
                "transition-delay": 500 * (s - e - 1) + "ms"
            }), $(this).addClass("falling"), $(this).removeClass("active"), $("#innerWrapper-right .columns .items:nth-child(2)").css({
                "animation-delay": 500 * (s + e - 1) + "ms"
            }), $("#innerWrapper-right .columns .items:nth-child(2)").addClass("move_upwards_to_pos_1"), 
            $("#innerWrapper-right .columns .items:nth-child(3)").css({
                "animation-delay": 500 * (s + e) + "ms"
            }), $("#innerWrapper-right .columns .items:nth-child(3)").addClass("move_upwards_to_pos_2"), 
            $("#innerWrapper-right .columns .items:nth-child(4)").css({
                "animation-delay": 500 * (s + e + 1) + "ms"
            }), $("#innerWrapper-right .columns .items:nth-child(4)").addClass("move_upwards_to_pos_3");
        }), e();
    }), $(".items").on("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend", function() {
        console.log(" removing"), $(".items.falling").hide(), $(".items.falling").removeClass("falling active selected pos_0 pos_1 pos_2 pos_3");
    }), $(".buttons.button-right").on("click", function(e) {});
}();